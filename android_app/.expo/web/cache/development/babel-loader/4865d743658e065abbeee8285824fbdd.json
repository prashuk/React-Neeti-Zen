{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/prashuk/Desktop/Github/Neeti-Zen/android_app/screens/Medical.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Block, Button, Text, Input } from \"galio-framework\";\nimport RBSheet from \"react-native-raw-bottom-sheet\";\nimport Sheet from \"../components/Sheet\";\nimport Spinner from \"react-native-loading-spinner-overlay\";\nimport * as firebase from \"firebase\";\nimport \"firebase/storage\";\n\nvar _Dimensions$get = Dimensions.get(\"screen\"),\n    width = _Dimensions$get.width;\n\nvar Medical = function (_React$Component) {\n  _inherits(Medical, _React$Component);\n\n  var _super = _createSuper(Medical);\n\n  function Medical(props) {\n    var _this;\n\n    _classCallCheck(this, Medical);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      patientName: \"\",\n      age: \"\",\n      occupation: \"\",\n      fatherName: \"\",\n      countFamily: \"\",\n      address: \"\",\n      imgAddProof: \"\",\n      telephoneNumber: \"\",\n      aadharCard: \"\",\n      imgAadhar: \"\",\n      disease: \"\",\n      financialAmt: \"\",\n      imgEstimate: \"\",\n      assistanceEarlier: \"\",\n      otherSourceFund: \"\",\n      govEmployee: \"\",\n      btnId: \"\",\n      ticketNumberDatabase: 0,\n      spinner: false\n    };\n\n    _this.handleImage = function (img) {\n      if (_this.state.btnId === \"address\") {\n        _this.setState({\n          imgAddProof: img\n        });\n      }\n\n      if (_this.state.btnId === \"aadhar\") {\n        _this.setState({\n          imgAadhar: img\n        });\n      }\n\n      if (_this.state.btnId === \"estimate\") {\n        _this.setState({\n          imgEstimate: img\n        });\n      }\n\n      _this.RBSheet.close();\n\n      Alert.alert(\"Uploaded\");\n    };\n\n    _this.uploadImage = function _callee(uri, name, ticket) {\n      var response, blob, imageRef, url;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(fetch(uri));\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(response.blob());\n\n            case 5:\n              blob = _context.sent;\n              imageRef = firebase.storage().ref().child(\"images/\" + ticket.toString() + \"/\" + name + \".jpg\");\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(imageRef.put(blob, {\n                contentType: \"image/jpg\"\n              }).catch(function (error) {\n                throw error;\n              }));\n\n            case 9:\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(imageRef.getDownloadURL().catch(function (error) {\n                throw error;\n              }));\n\n            case 11:\n              url = _context.sent;\n              return _context.abrupt(\"return\", url);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.submitBtnPressed = function _callee2() {\n      var ticketNumberDatabase, today, dd, mm, yyyy, addProofImgURL, aadharImgURL, estimateImgURL, postData;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(_this.state.patientName === \"\" || _this.state.age === \"\" || _this.state.occupation === \"\" || _this.state.fatherName === \"\" || _this.state.countFamily === \"\" || _this.state.address === \"\" || _this.state.imgAddProof === \"\" || _this.state.telephoneNumber === \"\" || _this.state.aadharCard === \"\" || _this.state.imgAadhar === \"\" || _this.state.disease === \"\" || _this.state.financialAmt === \"\" || _this.state.imgEstimate === \"\" || _this.state.assistanceEarlier === \"\" || _this.state.otherSourceFund === \"\" || _this.state.govEmployee === \"\")) {\n                _context2.next = 3;\n                break;\n              }\n\n              alert(\"Fill all fields\");\n              return _context2.abrupt(\"return\");\n\n            case 3:\n              _this.setState({\n                spinner: true\n              });\n\n              ticketNumberDatabase = _this.state.ticketNumberDatabase;\n              today = new Date();\n              dd = String(today.getDate()).padStart(2, \"0\");\n              mm = String(today.getMonth() + 1).padStart(2, \"0\");\n              yyyy = today.getFullYear();\n              today = dd + \"/\" + mm + \"/\" + yyyy;\n              _context2.next = 12;\n              return _regeneratorRuntime.awrap(_this.uploadImage(_this.state.imgAddProof, \"addressProof_\" + global.User.user.email + \"_medical_\" + ticketNumberDatabase.toString() + \".jpg\", ticketNumberDatabase));\n\n            case 12:\n              addProofImgURL = _context2.sent;\n              _context2.next = 15;\n              return _regeneratorRuntime.awrap(_this.uploadImage(_this.state.imgAadhar, \"aadhar_\" + global.User.user.email + \"_medical_\" + ticketNumberDatabase.toString() + \".jpg\", ticketNumberDatabase));\n\n            case 15:\n              aadharImgURL = _context2.sent;\n              _context2.next = 18;\n              return _regeneratorRuntime.awrap(_this.uploadImage(_this.state.imgEstimate, \"estimate_\" + global.User.user.email + \"_medical_\" + ticketNumberDatabase.toString() + \".jpg\", ticketNumberDatabase));\n\n            case 18:\n              estimateImgURL = _context2.sent;\n              postData = {\n                ticketNumber: _this.state.ticketNumberDatabase,\n                description: {\n                  name: global.currentUserName,\n                  date: today,\n                  type: \"medical\",\n                  status: \"open\",\n                  assigned: \"admin\",\n                  nameOfPatient: _this.state.patientName,\n                  ageAndSex: _this.state.age,\n                  occupationOfPatient: _this.state.occupation,\n                  fatherOrHusbandName: _this.state.fatherName,\n                  numberOfFamilyMember: _this.state.countFamily,\n                  residentialAddress: _this.state.address,\n                  addressProof: addProofImgURL,\n                  telephoneNumber: _this.state.telephoneNumber,\n                  aadharCard: _this.state.aadharCard,\n                  aadharProof: aadharImgURL,\n                  natureOfDisease: _this.state.disease,\n                  financialAssistantAmount: _this.state.financialAmt,\n                  estimateProof: estimateImgURL,\n                  medicalAssistanceEarlier: _this.state.assistanceEarlier,\n                  otherSourceFunding: _this.state.otherSourceFund,\n                  patientGovernmentEmployee: _this.state.govEmployee\n                }\n              };\n              firebase.database().ref(\"users/\" + global.User.user.uid + \"/complaints/medical/\").push().set(postData).then(function () {\n                var updates = {};\n                updates[\"ticket/ticket/\"] = ticketNumberDatabase;\n                firebase.database().ref().update(updates).then(_this.setState({\n                  spinner: false\n                }), Alert.alert(\"Complain Submitted: Ticket Number \" + ticketNumberDatabase.toString(), \"\", [{\n                  text: \"OK\",\n                  onPress: function onPress() {\n                    _this.props.navigation.goBack();\n                  }\n                }], {\n                  cancelable: false\n                })).catch(function (error) {\n                  console.log(error.message);\n                });\n              });\n\n            case 21:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    firebase.database().ref(\"ticket/ticket/\").on(\"value\", function (snapshot) {\n      var ticketNumberDatabase = parseInt(snapshot.val());\n      _this.state.ticketNumberDatabase = ticketNumberDatabase + 1;\n    });\n    return _this;\n  }\n\n  _createClass(Medical, [{\n    key: \"uploadBtnPressed\",\n    value: function uploadBtnPressed(event, buttonId) {\n      this.RBSheet.open();\n      this.setState({\n        btnId: buttonId\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      return React.createElement(ScrollView, {\n        showsVerticalScrollIndicator: false,\n        contentContainerStyle: {\n          paddingBottom: 0\n        },\n        keyboardShouldPersistTaps: \"always\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 214,\n          columnNumber: 7\n        }\n      }, React.createElement(Spinner, {\n        visible: this.state.spinner,\n        textStyle: styles.spinnerTextStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 219,\n          columnNumber: 9\n        }\n      }), React.createElement(Block, {\n        flex: true,\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 9\n        }\n      }, React.createElement(Block, {\n        style: styles.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }\n      }, React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        color: \"#4f3961\",\n        size: 25,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 15\n        }\n      }, \"Fill Form\")), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Name of Patient\",\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            patientName: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Age/Sex\",\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            age: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 239,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 246,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Occupation of Patient\",\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            occupation: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Father\\u2019s/Husband Name\",\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            fatherName: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 262,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Number of Family Number\",\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            countFamily: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 270,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Residential Address\",\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            address: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 271,\n          columnNumber: 15\n        }\n      })), React.createElement(Button, {\n        style: styles.sideButton,\n        color: \"#4f3961\",\n        textStyle: {\n          color: \"white\"\n        },\n        onPress: function onPress(event) {\n          return _this2.uploadBtnPressed(event, \"address\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 278,\n          columnNumber: 13\n        }\n      }, \"Upload Address Proof\"), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 286,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Telephone Number\",\n        type: \"number-pad\",\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            telephoneNumber: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 287,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Aadhaar Card Number\",\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            aadharCard: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 296,\n          columnNumber: 15\n        }\n      })), React.createElement(Button, {\n        style: styles.sideButton,\n        color: \"#4f3961\",\n        textStyle: {\n          color: \"white\"\n        },\n        onPress: function onPress(event) {\n          return _this2.uploadBtnPressed(event, \"aadhar\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 303,\n          columnNumber: 13\n        }\n      }, \"Upload Aadhar Card\"), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 311,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Nature of Disease\",\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            disease: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Financial Assistance Amount\",\n        type: \"number-pad\",\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            financialAmt: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 320,\n          columnNumber: 15\n        }\n      })), React.createElement(Button, {\n        style: styles.sideButton,\n        color: \"#4f3961\",\n        textStyle: {\n          color: \"white\"\n        },\n        onPress: function onPress(event) {\n          return _this2.uploadBtnPressed(event, \"estimate\");\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 13\n        }\n      }, \"Upload an Estimate from the govt\"), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 336,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Received Medical Assistance Earlier\",\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            assistanceEarlier: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 337,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Any other Source of Funding applied\",\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            otherSourceFund: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 345,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 352,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Patient Government employee\",\n        onChangeText: function onChangeText(text) {\n          _this2.setState({\n            govEmployee: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 15\n        }\n      }))), React.createElement(Block, {\n        center: true,\n        style: {\n          paddingBottom: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 11\n        }\n      }, React.createElement(Button, {\n        style: styles.button,\n        color: \"#4f3961\",\n        onPress: this.submitBtnPressed,\n        textStyle: {\n          color: \"white\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 362,\n          columnNumber: 13\n        }\n      }, \"SUBMIT\"))), React.createElement(RBSheet, {\n        ref: function ref(_ref) {\n          _this2.RBSheet = _ref;\n        },\n        height: 150,\n        duration: 250,\n        customStyles: {\n          container: {\n            justifyContent: \"center\",\n            alignItems: \"center\"\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 9\n        }\n      }, React.createElement(Sheet, {\n        imageSelect: this.handleImage,\n        navigation: this.props.navigation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 385,\n          columnNumber: 11\n        }\n      })));\n    }\n  }]);\n\n  return Medical;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"#fff2ff\"\n  },\n  button: {\n    width: width - 40,\n    height: 50,\n    shadowRadius: 10,\n    marginBottom: 10\n  },\n  sideButton: {\n    width: width - 60,\n    height: 50,\n    shadowRadius: 10,\n    marginBottom: 10\n  },\n  title: {\n    marginTop: 20,\n    marginRight: 30,\n    marginLeft: 30\n  }\n});\nexport default Medical;","map":{"version":3,"sources":["/Users/prashuk/Desktop/Github/Neeti-Zen/android_app/screens/Medical.js"],"names":["React","Block","Button","Text","Input","RBSheet","Sheet","Spinner","firebase","Dimensions","get","width","Medical","props","state","patientName","age","occupation","fatherName","countFamily","address","imgAddProof","telephoneNumber","aadharCard","imgAadhar","disease","financialAmt","imgEstimate","assistanceEarlier","otherSourceFund","govEmployee","btnId","ticketNumberDatabase","spinner","handleImage","img","setState","close","Alert","alert","uploadImage","uri","name","ticket","fetch","response","blob","imageRef","storage","ref","child","toString","put","contentType","catch","error","getDownloadURL","url","submitBtnPressed","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","global","User","user","email","addProofImgURL","aadharImgURL","estimateImgURL","postData","ticketNumber","description","currentUserName","date","type","status","assigned","nameOfPatient","ageAndSex","occupationOfPatient","fatherOrHusbandName","numberOfFamilyMember","residentialAddress","addressProof","aadharProof","natureOfDisease","financialAssistantAmount","estimateProof","medicalAssistanceEarlier","otherSourceFunding","patientGovernmentEmployee","database","uid","push","set","then","updates","update","text","onPress","navigation","goBack","cancelable","console","log","message","on","snapshot","parseInt","val","event","buttonId","open","paddingBottom","styles","spinnerTextStyle","container","title","sideButton","color","uploadBtnPressed","button","justifyContent","alignItems","Component","StyleSheet","create","backgroundColor","height","shadowRadius","marginBottom","marginTop","marginRight","marginLeft"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { StyleSheet, Dimensions, ScrollView, Alert } from \"react-native\";\nimport { Block, Button, Text, Input } from \"galio-framework\";\nimport RBSheet from \"react-native-raw-bottom-sheet\";\nimport Sheet from \"../components/Sheet\";\nimport Spinner from \"react-native-loading-spinner-overlay\";\n\nimport * as firebase from \"firebase\";\nimport \"firebase/storage\";\n\nconst { width } = Dimensions.get(\"screen\");\n\nclass Medical extends React.Component {\n  state = {\n    patientName: \"\",\n    age: \"\",\n    occupation: \"\",\n    fatherName: \"\",\n    countFamily: \"\",\n    address: \"\",\n    imgAddProof: \"\",\n    telephoneNumber: \"\",\n    aadharCard: \"\",\n    imgAadhar: \"\",\n    disease: \"\",\n    financialAmt: \"\",\n    imgEstimate: \"\",\n    assistanceEarlier: \"\",\n    otherSourceFund: \"\",\n    govEmployee: \"\",\n    btnId: \"\",\n    ticketNumberDatabase: 0,\n    spinner: false,\n  };\n\n  constructor(props) {\n    super(props);\n\n    firebase\n      .database()\n      .ref(\"ticket/ticket/\")\n      .on(\"value\", (snapshot) => {\n        let ticketNumberDatabase = parseInt(snapshot.val());\n        this.state.ticketNumberDatabase = ticketNumberDatabase + 1;\n      });\n  }\n\n  uploadBtnPressed(event, buttonId) {\n    this.RBSheet.open();\n    this.setState({ btnId: buttonId });\n  }\n\n  handleImage = (img) => {\n    if (this.state.btnId === \"address\") {\n      this.setState({ imgAddProof: img });\n    }\n    if (this.state.btnId === \"aadhar\") {\n      this.setState({ imgAadhar: img });\n    }\n    if (this.state.btnId === \"estimate\") {\n      this.setState({ imgEstimate: img });\n    }\n    this.RBSheet.close();\n    Alert.alert(\"Uploaded\");\n  };\n\n  uploadImage = async (uri, name, ticket) => {\n    const response = await fetch(uri);\n    const blob = await response.blob();\n\n    const imageRef = firebase\n      .storage()\n      .ref()\n      .child(\"images/\" + ticket.toString() + \"/\" + name + \".jpg\");\n\n    await imageRef.put(blob, { contentType: \"image/jpg\" }).catch((error) => {\n      throw error;\n    });\n\n    const url = await imageRef.getDownloadURL().catch((error) => {\n      throw error;\n    });\n    return url;\n  };\n\n  submitBtnPressed = async () => {\n    if (\n      this.state.patientName === \"\" ||\n      this.state.age === \"\" ||\n      this.state.occupation === \"\" ||\n      this.state.fatherName === \"\" ||\n      this.state.countFamily === \"\" ||\n      this.state.address === \"\" ||\n      this.state.imgAddProof === \"\" ||\n      this.state.telephoneNumber === \"\" ||\n      this.state.aadharCard === \"\" ||\n      this.state.imgAadhar === \"\" ||\n      this.state.disease === \"\" ||\n      this.state.financialAmt === \"\" ||\n      this.state.imgEstimate === \"\" ||\n      this.state.assistanceEarlier === \"\" ||\n      this.state.otherSourceFund === \"\" ||\n      this.state.govEmployee === \"\"\n    ) {\n      alert(\"Fill all fields\");\n      return;\n    }\n\n    this.setState({ spinner: true });\n    var ticketNumberDatabase = this.state.ticketNumberDatabase;\n\n    var today = new Date();\n    var dd = String(today.getDate()).padStart(2, \"0\");\n    var mm = String(today.getMonth() + 1).padStart(2, \"0\");\n    var yyyy = today.getFullYear();\n    today = dd + \"/\" + mm + \"/\" + yyyy;\n\n    const addProofImgURL = await this.uploadImage(\n      this.state.imgAddProof,\n      \"addressProof_\" +\n        global.User.user.email +\n        \"_medical_\" +\n        ticketNumberDatabase.toString() +\n        \".jpg\",\n      ticketNumberDatabase\n    );\n\n    const aadharImgURL = await this.uploadImage(\n      this.state.imgAadhar,\n      \"aadhar_\" +\n        global.User.user.email +\n        \"_medical_\" +\n        ticketNumberDatabase.toString() +\n        \".jpg\",\n      ticketNumberDatabase\n    );\n\n    const estimateImgURL = await this.uploadImage(\n      this.state.imgEstimate,\n      \"estimate_\" +\n        global.User.user.email +\n        \"_medical_\" +\n        ticketNumberDatabase.toString() +\n        \".jpg\",\n      ticketNumberDatabase\n    );\n\n    var postData = {\n      ticketNumber: this.state.ticketNumberDatabase,\n      description: {\n        name: global.currentUserName,\n        date: today,\n        type: \"medical\",\n        status: \"open\",\n        assigned: \"admin\",\n\n        nameOfPatient: this.state.patientName,\n        ageAndSex: this.state.age,\n        occupationOfPatient: this.state.occupation,\n        fatherOrHusbandName: this.state.fatherName,\n        numberOfFamilyMember: this.state.countFamily,\n        residentialAddress: this.state.address,\n        addressProof: addProofImgURL,\n        telephoneNumber: this.state.telephoneNumber,\n        aadharCard: this.state.aadharCard,\n        aadharProof: aadharImgURL,\n        natureOfDisease: this.state.disease,\n        financialAssistantAmount: this.state.financialAmt,\n        estimateProof: estimateImgURL,\n        medicalAssistanceEarlier: this.state.assistanceEarlier,\n        otherSourceFunding: this.state.otherSourceFund,\n        patientGovernmentEmployee: this.state.govEmployee,\n      },\n    };\n\n    firebase\n      .database()\n      .ref(\"users/\" + global.User.user.uid + \"/complaints/medical/\")\n      .push()\n      .set(postData)\n      .then(() => {\n        var updates = {};\n        updates[\"ticket/ticket/\"] = ticketNumberDatabase;\n\n        firebase\n          .database()\n          .ref()\n          .update(updates)\n          .then(\n            this.setState({ spinner: false }),\n            Alert.alert(\n              \"Complain Submitted: Ticket Number \" +\n                ticketNumberDatabase.toString(),\n              \"\",\n              [\n                {\n                  text: \"OK\",\n                  onPress: () => {\n                    this.props.navigation.goBack();\n                  },\n                },\n              ],\n              { cancelable: false }\n            )\n          )\n          .catch(function (error) {\n            console.log(error.message);\n          });\n      });\n  };\n\n  render() {\n    return (\n      <ScrollView\n        showsVerticalScrollIndicator={false}\n        contentContainerStyle={{ paddingBottom: 0 }}\n        keyboardShouldPersistTaps=\"always\"\n      >\n        <Spinner\n          visible={this.state.spinner}\n          textStyle={styles.spinnerTextStyle}\n        />\n        <Block flex style={styles.container}>\n          <Block style={styles.title}>\n            <Block>\n              <Text color=\"#4f3961\" size={25}>\n                Fill Form\n              </Text>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Name of Patient\"\n                onChangeText={(text) => {\n                  this.setState({ patientName: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Age/Sex\"\n                onChangeText={(text) => {\n                  this.setState({ age: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Occupation of Patient\"\n                onChangeText={(text) => {\n                  this.setState({ occupation: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Fatherâ€™s/Husband Name\"\n                onChangeText={(text) => {\n                  this.setState({ fatherName: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Number of Family Number\"\n                onChangeText={(text) => {\n                  this.setState({ countFamily: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Residential Address\"\n                onChangeText={(text) => {\n                  this.setState({ address: text });\n                }}\n              ></Input>\n            </Block>\n            <Button\n              style={styles.sideButton}\n              color=\"#4f3961\"\n              textStyle={{ color: \"white\" }}\n              onPress={(event) => this.uploadBtnPressed(event, \"address\")}\n            >\n              Upload Address Proof\n            </Button>\n            <Block>\n              <Input\n                placeholder=\"Telephone Number\"\n                type={\"number-pad\"}\n                onChangeText={(text) => {\n                  this.setState({ telephoneNumber: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Aadhaar Card Number\"\n                onChangeText={(text) => {\n                  this.setState({ aadharCard: text });\n                }}\n              ></Input>\n            </Block>\n            <Button\n              style={styles.sideButton}\n              color=\"#4f3961\"\n              textStyle={{ color: \"white\" }}\n              onPress={(event) => this.uploadBtnPressed(event, \"aadhar\")}\n            >\n              Upload Aadhar Card\n            </Button>\n            <Block>\n              <Input\n                placeholder=\"Nature of Disease\"\n                onChangeText={(text) => {\n                  this.setState({ disease: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Financial Assistance Amount\"\n                type={\"number-pad\"}\n                onChangeText={(text) => {\n                  this.setState({ financialAmt: text });\n                }}\n              ></Input>\n            </Block>\n            <Button\n              style={styles.sideButton}\n              color=\"#4f3961\"\n              textStyle={{ color: \"white\" }}\n              onPress={(event) => this.uploadBtnPressed(event, \"estimate\")}\n            >\n              Upload an Estimate from the govt\n            </Button>\n            <Block>\n              <Input\n                placeholder=\"Received Medical Assistance Earlier\"\n                onChangeText={(text) => {\n                  this.setState({ assistanceEarlier: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Any other Source of Funding applied\"\n                onChangeText={(text) => {\n                  this.setState({ otherSourceFund: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Patient Government employee\"\n                onChangeText={(text) => {\n                  this.setState({ govEmployee: text });\n                }}\n              ></Input>\n            </Block>\n          </Block>\n          <Block center style={{ paddingBottom: 10 }}>\n            <Button\n              style={styles.button}\n              color=\"#4f3961\"\n              onPress={this.submitBtnPressed}\n              textStyle={{ color: \"white\" }}\n            >\n              SUBMIT\n            </Button>\n          </Block>\n        </Block>\n        <RBSheet\n          ref={(ref) => {\n            this.RBSheet = ref;\n          }}\n          height={150}\n          duration={250}\n          customStyles={{\n            container: {\n              justifyContent: \"center\",\n              alignItems: \"center\",\n            },\n          }}\n        >\n          <Sheet\n            imageSelect={this.handleImage}\n            navigation={this.props.navigation}\n          />\n        </RBSheet>\n      </ScrollView>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"#fff2ff\",\n  },\n  button: {\n    width: width - 40,\n    height: 50,\n    shadowRadius: 10,\n    marginBottom: 10,\n  },\n  sideButton: {\n    width: width - 60,\n    height: 50,\n    shadowRadius: 10,\n    marginBottom: 10,\n  },\n  title: {\n    marginTop: 20,\n    marginRight: 30,\n    marginLeft: 30,\n  },\n});\n\nexport default Medical;\n"]},"metadata":{},"sourceType":"module"}