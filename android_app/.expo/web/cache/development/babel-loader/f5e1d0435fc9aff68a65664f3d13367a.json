{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nvar _jsxFileName = \"/Users/prashuk/Desktop/Github/Neeti-Zen/android_app/screens/Expatriates.js\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from \"react\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport Dimensions from \"react-native-web/dist/exports/Dimensions\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport Alert from \"react-native-web/dist/exports/Alert\";\nimport { Block, Button, Text, Input } from \"galio-framework\";\nimport { Dropdown } from \"react-native-material-dropdown\";\nimport RBSheet from \"react-native-raw-bottom-sheet\";\nimport Sheet from \"../components/Sheet\";\nimport * as firebase from \"firebase\";\nimport \"firebase/storage\";\nimport Spinner from \"react-native-loading-spinner-overlay\";\n\nvar _Dimensions$get = Dimensions.get(\"screen\"),\n    width = _Dimensions$get.width;\n\nvar data = [{\n  value: \"Job\",\n  subitems: [{\n    value: \"Fraud\"\n  }, {\n    value: \"Unsafe work\"\n  }, {\n    value: \"Wages\"\n  }, {\n    value: \"Work accident\"\n  }]\n}, {\n  value: \"Expatriation\",\n  subitems: [{\n    value: \"Detention\"\n  }, {\n    value: \"Death abroad\"\n  }]\n}, {\n  value: \"Missing National\"\n}];\n\nvar Expatriates = function (_React$Component) {\n  _inherits(Expatriates, _React$Component);\n\n  var _super = _createSuper(Expatriates);\n\n  function Expatriates(props) {\n    var _this;\n\n    _classCallCheck(this, Expatriates);\n\n    _this = _super.call(this, props);\n    _this.state = {\n      selectJob: \"\",\n      selectReason: \"\",\n      name: \"\",\n      addressPhone: \"\",\n      countryBirth: \"\",\n      countryResidence: \"\",\n      address: \"\",\n      imgPassport: \"\",\n      imgVisa: \"\",\n      imgAadhar: \"\",\n      email: \"\",\n      phoneNumber: 0,\n      employer: \"\",\n      notes: \"\",\n      btnId: \"\",\n      ticketNumberDatabase: 0,\n      spinner: false\n    };\n\n    _this.handleImage = function (img) {\n      if (_this.state.btnId === \"passport\") {\n        _this.setState({\n          imgPassport: img\n        });\n      }\n\n      if (_this.state.btnId === \"visa\") {\n        _this.setState({\n          imgVisa: img\n        });\n      }\n\n      if (_this.state.btnId === \"aadhar\") {\n        _this.setState({\n          imgAadhar: img\n        });\n      }\n\n      _this.RBSheet.close();\n\n      Alert.alert(\"Uploaded\");\n    };\n\n    _this.uploadImage = function _callee(uri, name, ticket) {\n      var response, blob, imageRef, url;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(fetch(uri));\n\n            case 2:\n              response = _context.sent;\n              _context.next = 5;\n              return _regeneratorRuntime.awrap(response.blob());\n\n            case 5:\n              blob = _context.sent;\n              imageRef = firebase.storage().ref().child(\"images/\" + ticket.toString() + \"/\" + name + \".jpg\");\n              _context.next = 9;\n              return _regeneratorRuntime.awrap(imageRef.put(blob, {\n                contentType: \"image/jpg\"\n              }).catch(function (error) {\n                throw error;\n              }));\n\n            case 9:\n              _context.next = 11;\n              return _regeneratorRuntime.awrap(imageRef.getDownloadURL().catch(function (error) {\n                throw error;\n              }));\n\n            case 11:\n              url = _context.sent;\n              return _context.abrupt(\"return\", url);\n\n            case 13:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.submitBtnPressed = function _callee2() {\n      var ticketNumberDatabase, today, dd, mm, yyyy, passportImgURL, visaImgURL, aadharImgURL, postData;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              if (!(_this.state.selectJob === \"\" || _this.state.name === \"\" || _this.state.addressPhone === \"\" || _this.state.countryBirth === \"\" || _this.state.countryResidence === \"\" || _this.state.address === \"\" || _this.state.imgPassport === \"\" || _this.state.imgVisa === \"\" || _this.state.imgAadhar === \"\" || _this.state.email === \"\" || _this.state.phoneNumber === 0 || _this.state.employer === \"\" || _this.state.notes === \"\")) {\n                _context2.next = 3;\n                break;\n              }\n\n              alert(\"Fill all fields\");\n              return _context2.abrupt(\"return\");\n\n            case 3:\n              _this.setState({\n                spinner: true\n              });\n\n              ticketNumberDatabase = _this.state.ticketNumberDatabase;\n              today = new Date();\n              dd = String(today.getDate()).padStart(2, \"0\");\n              mm = String(today.getMonth() + 1).padStart(2, \"0\");\n              yyyy = today.getFullYear();\n              today = dd + \"/\" + mm + \"/\" + yyyy;\n              _context2.next = 12;\n              return _regeneratorRuntime.awrap(_this.uploadImage(_this.state.imgPassport, \"passport_\" + global.User.user.email + \"_expatriates_\" + ticketNumberDatabase.toString() + \".jpg\", ticketNumberDatabase));\n\n            case 12:\n              passportImgURL = _context2.sent;\n              _context2.next = 15;\n              return _regeneratorRuntime.awrap(_this.uploadImage(_this.state.imgVisa, \"visa_\" + global.User.user.email + \"_expatriates_\" + ticketNumberDatabase.toString() + \".jpg\", ticketNumberDatabase));\n\n            case 15:\n              visaImgURL = _context2.sent;\n              _context2.next = 18;\n              return _regeneratorRuntime.awrap(_this.uploadImage(_this.state.imgAadhar, \"aadhar_\" + global.User.user.email + \"_expatriates_\" + ticketNumberDatabase.toString() + \".jpg\", ticketNumberDatabase));\n\n            case 18:\n              aadharImgURL = _context2.sent;\n              postData = {\n                ticketNumber: ticketNumberDatabase,\n                description: {\n                  name: global.currentUserName,\n                  date: today,\n                  type: \"expatriates\",\n                  status: \"open\",\n                  assigned: \"admin\",\n                  job: _this.state.selectJob,\n                  reason: _this.state.selectReason,\n                  name: _this.state.name,\n                  addressAndPhone: _this.state.addressPhone,\n                  countryOfBirth: _this.state.countryBirth,\n                  countryOfResidence: _this.state.countryResidence,\n                  currentAddress: _this.state.address,\n                  passportProof: passportImgURL,\n                  visaProof: visaImgURL,\n                  aadharProof: aadharImgURL,\n                  email: _this.state.email,\n                  phoneNumber: _this.state.phoneNumber,\n                  employer: _this.state.employer,\n                  notes: _this.state.notes\n                }\n              };\n              firebase.database().ref(\"users/\" + global.User.user.uid + \"/complaints/expatriates/\").push().set(postData).then(function () {\n                var updates = {};\n                updates[\"ticket/ticket/\"] = ticketNumberDatabase;\n                firebase.database().ref().update(updates).then(_this.setState({\n                  spinner: false\n                }), Alert.alert(\"Complain Submitted: Ticket Number \" + ticketNumberDatabase.toString(), \"\", [{\n                  text: \"OK\",\n                  onPress: function onPress() {\n                    _this.props.navigation.goBack();\n                  }\n                }], {\n                  cancelable: false\n                })).catch(function (error) {\n                  console.log(error.message);\n                });\n              });\n\n            case 21:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, null, null, null, Promise);\n    };\n\n    _this.findOptionUsed = _this.findOptionUsed.bind(_assertThisInitialized(_this));\n    firebase.database().ref(\"ticket/ticket/\").on(\"value\", function (snapshot) {\n      var ticketNumberDatabase = parseInt(snapshot.val());\n      _this.state.ticketNumberDatabase = ticketNumberDatabase + 1;\n    });\n    return _this;\n  }\n\n  _createClass(Expatriates, [{\n    key: \"uploadBtnPressed\",\n    value: function uploadBtnPressed(event, buttonId) {\n      this.RBSheet.open();\n      this.setState({\n        btnId: buttonId\n      });\n    }\n  }, {\n    key: \"findOptionUsed\",\n    value: function findOptionUsed() {\n      var _this2 = this;\n\n      if (this.state.selectJob === \"Job\") {\n        return React.createElement(Block, {\n          style: {\n            backgroundColor: \"white\",\n            marginBottom: 10,\n            borderRadius: 10\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 104,\n            columnNumber: 9\n          }\n        }, React.createElement(Dropdown, {\n          id: \"anotherDropDown\",\n          label: \"Select Reason\",\n          data: data[0][\"subitems\"],\n          onChangeText: function onChangeText(text) {\n            _this2.setState({\n              selectReason: text\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111,\n            columnNumber: 11\n          }\n        }));\n      }\n\n      if (this.state.selectJob === \"Expatriation\") {\n        return React.createElement(Block, {\n          style: {\n            backgroundColor: \"white\",\n            marginBottom: 10,\n            borderRadius: 10\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 9\n          }\n        }, React.createElement(Dropdown, {\n          id: \"anotherDropDown\",\n          label: \"Select Reason\",\n          data: data[1][\"subitems\"],\n          onChangeText: function onChangeText(text) {\n            _this2.setState({\n              selectReason: text\n            });\n          },\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 131,\n            columnNumber: 11\n          }\n        }));\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      return React.createElement(ScrollView, {\n        showsVerticalScrollIndicator: false,\n        keyboardShouldPersistTaps: \"always\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 7\n        }\n      }, React.createElement(Spinner, {\n        visible: this.state.spinner,\n        textStyle: styles.spinnerTextStyle,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 288,\n          columnNumber: 9\n        }\n      }), React.createElement(Block, {\n        flex: true,\n        style: styles.container,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 292,\n          columnNumber: 9\n        }\n      }, React.createElement(Block, {\n        style: styles.title,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 293,\n          columnNumber: 11\n        }\n      }, React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 294,\n          columnNumber: 13\n        }\n      }, React.createElement(Text, {\n        color: \"#4f3961\",\n        size: 25,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 295,\n          columnNumber: 15\n        }\n      }, \"Fill Form\")), React.createElement(Block, {\n        style: {\n          backgroundColor: \"white\",\n          marginBottom: 10,\n          borderRadius: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 299,\n          columnNumber: 13\n        }\n      }, React.createElement(Dropdown, {\n        label: \"Select Job\",\n        data: data,\n        onChangeText: function onChangeText(text) {\n          _this3.setState({\n            selectJob: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 306,\n          columnNumber: 15\n        }\n      })), this.findOptionUsed(), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 315,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Name\",\n        onChangeText: function onChangeText(text) {\n          _this3.setState({\n            name: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 316,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Permanent Address with Phone number in India\",\n        onChangeText: function onChangeText(text) {\n          _this3.setState({\n            addressPhone: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 324,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 331,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Country of birth\",\n        onChangeText: function onChangeText(text) {\n          _this3.setState({\n            countryBirth: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 339,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Country of Residence\",\n        onChangeText: function onChangeText(text) {\n          _this3.setState({\n            countryResidence: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 340,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 347,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Current Address\",\n        onChangeText: function onChangeText(text) {\n          _this3.setState({\n            address: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 348,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        center: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 355,\n          columnNumber: 13\n        }\n      }, React.createElement(Button, {\n        style: styles.sideButton,\n        color: \"#4f3961\",\n        onPress: function onPress(event) {\n          return _this3.uploadBtnPressed(event, \"passport\");\n        },\n        textStyle: {\n          color: \"white\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 356,\n          columnNumber: 15\n        }\n      }, \"Upload Passport\")), React.createElement(RBSheet, {\n        ref: function ref(_ref) {\n          _this3.RBSheet = _ref;\n        },\n        height: 150,\n        duration: 250,\n        customStyles: {\n          container: {\n            justifyContent: \"center\",\n            alignItems: \"center\"\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 365,\n          columnNumber: 13\n        }\n      }, React.createElement(Sheet, {\n        imageSelect: this.handleImage,\n        navigation: this.props.navigation,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        center: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 383,\n          columnNumber: 13\n        }\n      }, React.createElement(Button, {\n        style: styles.sideButton,\n        color: \"#4f3961\",\n        onPress: function onPress(event) {\n          return _this3.uploadBtnPressed(event, \"visa\");\n        },\n        textStyle: {\n          color: \"white\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 15\n        }\n      }, \"Upload Visa\")), React.createElement(Block, {\n        center: true,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }\n      }, React.createElement(Button, {\n        style: styles.sideButton,\n        color: \"#4f3961\",\n        onPress: function onPress(event) {\n          return _this3.uploadBtnPressed(event, \"aadhar\");\n        },\n        textStyle: {\n          color: \"white\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 15\n        }\n      }, \"Upload Aadhaar\")), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 403,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Email\",\n        type: \"email-address\",\n        autoCapitalize: \"none\",\n        onChangeText: function onChangeText(text) {\n          _this3.setState({\n            email: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 404,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 413,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Phone Number\",\n        type: \"number-pad\",\n        onChangeText: function onChangeText(text) {\n          _this3.setState({\n            phoneNumber: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 414,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Employer\",\n        onChangeText: function onChangeText(text) {\n          _this3.setState({\n            employer: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 15\n        }\n      })), React.createElement(Block, {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 430,\n          columnNumber: 13\n        }\n      }, React.createElement(Input, {\n        placeholder: \"Word Limit: 100 Words\",\n        onChangeText: function onChangeText(text) {\n          _this3.setState({\n            notes: text\n          });\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 15\n        }\n      }))), React.createElement(Block, {\n        center: true,\n        style: {\n          paddingBottom: 10\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 11\n        }\n      }, React.createElement(Button, {\n        style: styles.button,\n        color: \"#4f3961\",\n        onPress: this.submitBtnPressed,\n        textStyle: {\n          color: \"white\"\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 13\n        }\n      }, \"SUBMIT\"))));\n    }\n  }]);\n\n  return Expatriates;\n}(React.Component);\n\nvar styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"#fff2ff\"\n  },\n  button: {\n    width: width - 40,\n    height: 50,\n    shadowRadius: 10,\n    marginBottom: 10\n  },\n  sideButton: {\n    width: width - 60,\n    height: 50,\n    shadowRadius: 10,\n    marginBottom: 10\n  },\n  title: {\n    marginTop: 20,\n    marginRight: 30,\n    marginLeft: 30\n  }\n});\nexport default Expatriates;","map":{"version":3,"sources":["/Users/prashuk/Desktop/Github/Neeti-Zen/android_app/screens/Expatriates.js"],"names":["React","Block","Button","Text","Input","Dropdown","RBSheet","Sheet","firebase","Spinner","Dimensions","get","width","data","value","subitems","Expatriates","props","state","selectJob","selectReason","name","addressPhone","countryBirth","countryResidence","address","imgPassport","imgVisa","imgAadhar","email","phoneNumber","employer","notes","btnId","ticketNumberDatabase","spinner","handleImage","img","setState","close","Alert","alert","uploadImage","uri","ticket","fetch","response","blob","imageRef","storage","ref","child","toString","put","contentType","catch","error","getDownloadURL","url","submitBtnPressed","today","Date","dd","String","getDate","padStart","mm","getMonth","yyyy","getFullYear","global","User","user","passportImgURL","visaImgURL","aadharImgURL","postData","ticketNumber","description","currentUserName","date","type","status","assigned","job","reason","addressAndPhone","countryOfBirth","countryOfResidence","currentAddress","passportProof","visaProof","aadharProof","database","uid","push","set","then","updates","update","text","onPress","navigation","goBack","cancelable","console","log","message","findOptionUsed","bind","on","snapshot","parseInt","val","event","buttonId","open","backgroundColor","marginBottom","borderRadius","styles","spinnerTextStyle","container","title","sideButton","uploadBtnPressed","color","justifyContent","alignItems","paddingBottom","button","Component","StyleSheet","create","height","shadowRadius","marginTop","marginRight","marginLeft"],"mappings":"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","sourcesContent":["import React from \"react\";\nimport { StyleSheet, Dimensions, ScrollView, Alert } from \"react-native\";\nimport { Block, Button, Text, Input } from \"galio-framework\";\nimport { Dropdown } from \"react-native-material-dropdown\";\nimport RBSheet from \"react-native-raw-bottom-sheet\";\nimport Sheet from \"../components/Sheet\";\nimport * as firebase from \"firebase\";\nimport \"firebase/storage\";\nimport Spinner from \"react-native-loading-spinner-overlay\";\n\nconst { width } = Dimensions.get(\"screen\");\n\nconst data = [\n  {\n    value: \"Job\",\n    subitems: [\n      {\n        value: \"Fraud\",\n      },\n      {\n        value: \"Unsafe work\",\n      },\n      {\n        value: \"Wages\",\n      },\n      {\n        value: \"Work accident\",\n      },\n    ],\n  },\n  {\n    value: \"Expatriation\",\n    subitems: [\n      {\n        value: \"Detention\",\n      },\n      {\n        value: \"Death abroad\",\n      },\n    ],\n  },\n  {\n    value: \"Missing National\",\n  },\n];\n\nclass Expatriates extends React.Component {\n  state = {\n    selectJob: \"\",\n    selectReason: \"\",\n    name: \"\",\n    addressPhone: \"\",\n    countryBirth: \"\",\n    countryResidence: \"\",\n    address: \"\",\n    imgPassport: \"\",\n    imgVisa: \"\",\n    imgAadhar: \"\",\n    email: \"\",\n    phoneNumber: 0,\n    employer: \"\",\n    notes: \"\",\n    btnId: \"\",\n    ticketNumberDatabase: 0,\n    spinner: false,\n  };\n\n  constructor(props) {\n    super(props);\n\n    this.findOptionUsed = this.findOptionUsed.bind(this);\n\n    firebase\n      .database()\n      .ref(\"ticket/ticket/\")\n      .on(\"value\", (snapshot) => {\n        let ticketNumberDatabase = parseInt(snapshot.val());\n        this.state.ticketNumberDatabase = ticketNumberDatabase + 1;\n      });\n  }\n\n  uploadBtnPressed(event, buttonId) {\n    this.RBSheet.open();\n    this.setState({ btnId: buttonId });\n  }\n\n  handleImage = (img) => {\n    if (this.state.btnId === \"passport\") {\n      this.setState({ imgPassport: img });\n    }\n    if (this.state.btnId === \"visa\") {\n      this.setState({ imgVisa: img });\n    }\n    if (this.state.btnId === \"aadhar\") {\n      this.setState({ imgAadhar: img });\n    }\n    this.RBSheet.close();\n    Alert.alert(\"Uploaded\");\n  };\n\n  findOptionUsed() {\n    if (this.state.selectJob === \"Job\") {\n      return (\n        <Block\n          style={{\n            backgroundColor: \"white\",\n            marginBottom: 10,\n            borderRadius: 10,\n          }}\n        >\n          <Dropdown\n            id=\"anotherDropDown\"\n            label=\"Select Reason\"\n            data={data[0][\"subitems\"]}\n            onChangeText={(text) => {\n              this.setState({ selectReason: text });\n            }}\n          />\n        </Block>\n      );\n    }\n    if (this.state.selectJob === \"Expatriation\") {\n      return (\n        <Block\n          style={{\n            backgroundColor: \"white\",\n            marginBottom: 10,\n            borderRadius: 10,\n          }}\n        >\n          <Dropdown\n            id=\"anotherDropDown\"\n            label=\"Select Reason\"\n            data={data[1][\"subitems\"]}\n            onChangeText={(text) => {\n              this.setState({ selectReason: text });\n            }}\n          />\n        </Block>\n      );\n    }\n  }\n\n  uploadImage = async (uri, name, ticket) => {\n    const response = await fetch(uri);\n    const blob = await response.blob();\n\n    const imageRef = firebase\n      .storage()\n      .ref()\n      .child(\"images/\" + ticket.toString() + \"/\" + name + \".jpg\");\n    await imageRef.put(blob, { contentType: \"image/jpg\" }).catch((error) => {\n      throw error;\n    });\n    const url = await imageRef.getDownloadURL().catch((error) => {\n      throw error;\n    });\n    return url;\n  };\n\n  submitBtnPressed = async () => {\n    if (\n      this.state.selectJob === \"\" ||\n      this.state.name === \"\" ||\n      this.state.addressPhone === \"\" ||\n      this.state.countryBirth === \"\" ||\n      this.state.countryResidence === \"\" ||\n      this.state.address === \"\" ||\n      this.state.imgPassport === \"\" ||\n      this.state.imgVisa === \"\" ||\n      this.state.imgAadhar === \"\" ||\n      this.state.email === \"\" ||\n      this.state.phoneNumber === 0 ||\n      this.state.employer === \"\" ||\n      this.state.notes === \"\"\n    ) {\n      alert(\"Fill all fields\");\n      return;\n    }\n\n    this.setState({ spinner: true });\n    var ticketNumberDatabase = this.state.ticketNumberDatabase;\n\n    var today = new Date();\n    var dd = String(today.getDate()).padStart(2, \"0\");\n    var mm = String(today.getMonth() + 1).padStart(2, \"0\");\n    var yyyy = today.getFullYear();\n    today = dd + \"/\" + mm + \"/\" + yyyy;\n\n    const passportImgURL = await this.uploadImage(\n      this.state.imgPassport,\n      \"passport_\" +\n        global.User.user.email +\n        \"_expatriates_\" +\n        ticketNumberDatabase.toString() +\n        \".jpg\",\n      ticketNumberDatabase\n    );\n\n    const visaImgURL = await this.uploadImage(\n      this.state.imgVisa,\n      \"visa_\" +\n        global.User.user.email +\n        \"_expatriates_\" +\n        ticketNumberDatabase.toString() +\n        \".jpg\",\n      ticketNumberDatabase\n    );\n\n    const aadharImgURL = await this.uploadImage(\n      this.state.imgAadhar,\n      \"aadhar_\" +\n        global.User.user.email +\n        \"_expatriates_\" +\n        ticketNumberDatabase.toString() +\n        \".jpg\",\n      ticketNumberDatabase\n    );\n\n    var postData = {\n      ticketNumber: ticketNumberDatabase,\n      description: {\n        name: global.currentUserName,\n        date: today,\n        type: \"expatriates\",\n        status: \"open\",\n        assigned: \"admin\",\n\n        job: this.state.selectJob,\n        reason: this.state.selectReason,\n        name: this.state.name,\n        addressAndPhone: this.state.addressPhone,\n        countryOfBirth: this.state.countryBirth,\n        countryOfResidence: this.state.countryResidence,\n        currentAddress: this.state.address,\n        passportProof: passportImgURL,\n        visaProof: visaImgURL,\n        aadharProof: aadharImgURL,\n        email: this.state.email,\n        phoneNumber: this.state.phoneNumber,\n        employer: this.state.employer,\n        notes: this.state.notes,\n      },\n    };\n\n    firebase\n      .database()\n      .ref(\"users/\" + global.User.user.uid + \"/complaints/expatriates/\")\n      .push()\n      .set(postData)\n      .then(() => {\n        var updates = {};\n        updates[\"ticket/ticket/\"] = ticketNumberDatabase;\n\n        firebase\n          .database()\n          .ref()\n          .update(updates)\n          .then(\n            this.setState({ spinner: false }),\n            Alert.alert(\n              \"Complain Submitted: Ticket Number \" +\n                ticketNumberDatabase.toString(),\n              \"\",\n              [\n                {\n                  text: \"OK\",\n                  onPress: () => {\n                    this.props.navigation.goBack();\n                  },\n                },\n              ],\n              { cancelable: false }\n            )\n          )\n          .catch(function (error) {\n            console.log(error.message);\n          });\n      });\n  };\n\n  render() {\n    return (\n      <ScrollView\n        showsVerticalScrollIndicator={false}\n        keyboardShouldPersistTaps=\"always\"\n      >\n        <Spinner\n          visible={this.state.spinner}\n          textStyle={styles.spinnerTextStyle}\n        />\n        <Block flex style={styles.container}>\n          <Block style={styles.title}>\n            <Block>\n              <Text color=\"#4f3961\" size={25}>\n                Fill Form\n              </Text>\n            </Block>\n            <Block\n              style={{\n                backgroundColor: \"white\",\n                marginBottom: 10,\n                borderRadius: 10,\n              }}\n            >\n              <Dropdown\n                label=\"Select Job\"\n                data={data}\n                onChangeText={(text) => {\n                  this.setState({ selectJob: text });\n                }}\n              />\n            </Block>\n            {this.findOptionUsed()}\n            <Block>\n              <Input\n                placeholder=\"Name\"\n                onChangeText={(text) => {\n                  this.setState({ name: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Permanent Address with Phone number in India\"\n                onChangeText={(text) => {\n                  this.setState({ addressPhone: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Country of birth\"\n                onChangeText={(text) => {\n                  this.setState({ countryBirth: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Country of Residence\"\n                onChangeText={(text) => {\n                  this.setState({ countryResidence: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Current Address\"\n                onChangeText={(text) => {\n                  this.setState({ address: text });\n                }}\n              ></Input>\n            </Block>\n            <Block center>\n              <Button\n                style={styles.sideButton}\n                color=\"#4f3961\"\n                onPress={(event) => this.uploadBtnPressed(event, \"passport\")}\n                textStyle={{ color: \"white\" }}\n              >\n                Upload Passport\n              </Button>\n            </Block>\n            <RBSheet\n              ref={(ref) => {\n                this.RBSheet = ref;\n              }}\n              height={150}\n              duration={250}\n              customStyles={{\n                container: {\n                  justifyContent: \"center\",\n                  alignItems: \"center\",\n                },\n              }}\n            >\n              <Sheet\n                imageSelect={this.handleImage}\n                navigation={this.props.navigation}\n              />\n            </RBSheet>\n            <Block center>\n              <Button\n                style={styles.sideButton}\n                color=\"#4f3961\"\n                onPress={(event) => this.uploadBtnPressed(event, \"visa\")}\n                textStyle={{ color: \"white\" }}\n              >\n                Upload Visa\n              </Button>\n            </Block>\n            <Block center>\n              <Button\n                style={styles.sideButton}\n                color=\"#4f3961\"\n                onPress={(event) => this.uploadBtnPressed(event, \"aadhar\")}\n                textStyle={{ color: \"white\" }}\n              >\n                Upload Aadhaar\n              </Button>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Email\"\n                type={\"email-address\"}\n                autoCapitalize=\"none\"\n                onChangeText={(text) => {\n                  this.setState({ email: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Phone Number\"\n                type={\"number-pad\"}\n                onChangeText={(text) => {\n                  this.setState({ phoneNumber: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Employer\"\n                onChangeText={(text) => {\n                  this.setState({ employer: text });\n                }}\n              ></Input>\n            </Block>\n            <Block>\n              <Input\n                placeholder=\"Word Limit: 100 Words\"\n                onChangeText={(text) => {\n                  this.setState({ notes: text });\n                }}\n              ></Input>\n            </Block>\n          </Block>\n          <Block center style={{ paddingBottom: 10 }}>\n            <Button\n              style={styles.button}\n              color=\"#4f3961\"\n              onPress={this.submitBtnPressed}\n              textStyle={{ color: \"white\" }}\n            >\n              SUBMIT\n            </Button>\n          </Block>\n        </Block>\n      </ScrollView>\n    );\n  }\n}\n\nconst styles = StyleSheet.create({\n  container: {\n    backgroundColor: \"#fff2ff\",\n  },\n  button: {\n    width: width - 40,\n    height: 50,\n    shadowRadius: 10,\n    marginBottom: 10,\n  },\n  sideButton: {\n    width: width - 60,\n    height: 50,\n    shadowRadius: 10,\n    marginBottom: 10,\n  },\n  title: {\n    marginTop: 20,\n    marginRight: 30,\n    marginLeft: 30,\n  },\n});\n\nexport default Expatriates;\n"]},"metadata":{},"sourceType":"module"}